{% extends 'admin/base_site.html' %}
{% load static %}
{% load dict_extras %}

{% block title %}آمار رضایت کاربران{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{% static 'css/home.css' %}">
{% endblock %}

{% block content %}
<!-- Particle Background -->
<div class="particle-bg" id="particleBg"></div>

<!-- Hero Section -->
<section class="hero-section" style="min-height: 5vh; padding-top: 0; padding-bottom: 0;">
    <div class="hero-content" style="max-width: 700px; margin: 0 auto; text-align: center;">
        <div class="logo-container">
            <div class="logo-glow"></div>
            <h1 class="hero-title" style="margin-bottom: 0.5rem;">آمار رضایت کاربران</h1>
            <div class="logo-subtitle" style="margin-bottom: 0;">نمایش تحلیلی از امتیازها و کاربران ثبت‌کننده</div>
        </div>
    </div>
</section>

<!-- Stats Card Section -->
<section class="features-section" style="padding-top: 0; margin-top: 0;">
    <div class="container" style="max-width: 700px;">
        <div class="feature-card" style="padding: 2rem 2rem 2.5rem 2rem; margin: 0 auto;">
            <h2 class="section-title" style="margin-bottom: 1.2rem;">جدول امتیازها</h2>
            <table class="table table-bordered text-center" style="width:100%; background: transparent; border-radius: 1rem; overflow: hidden; margin-bottom: 1.5rem; text-align: center;">
                <thead style="background: var(--gradient-primary); color: #fff;">
                    <tr>
                        <th style="text-align: center;">امتیاز</th>
                        <th style="text-align: center;">تعداد</th>
                        <th style="text-align: center;">درصد</th>
                    </tr>
                </thead>
                <tbody>
                    {% for i in range_1_5 %}
                    <tr style="background: rgba(255,255,255,0.03); text-align: center;">
                        <td style="font-size:2rem; text-align: center;">{% if i == 1 %}😡{% elif i == 2 %}😞{% elif i == 3 %}😐{% elif i == 4 %}🙂{% elif i == 5 %}😍{% endif %} <span style="font-size:1rem;">({{ i }})</span></td>
                        <td style="font-weight:600; text-align: center;">{{ rating_counts|get_item:i }}</td>
                        <td style="font-weight:600; text-align: center;">{{ percentages|get_item:i|floatformat:1 }}%</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            <div class="mt-4 text-center" style="margin-top:1.2rem;">
                <strong>کل امتیازها:</strong> {{ total }}<br>
                <strong>درصد رضایت کامل (😍):</strong> {{ percentages.5|floatformat:1 }}%
            </div>
            <a href="{% url 'admin:user_ratings' %}" class="settings-btn" style="display:inline-block; margin-top:2rem; background: var(--gradient-button); color: #fff; padding: 0.7rem 1.5rem; border-radius: 10px; font-weight: 600; text-decoration: none;">مشاهده لیست امتیازهای کاربران</a>
        </div>
    </div>
</section>
<script>
// Particle animation for admin pages (copied from home page)
function createParticles() {
    const container = document.getElementById('particleBg');
    if (!container) return;
    const particleCount = 50;
    for (let i = 0; i < particleCount; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        particle.style.left = Math.random() * 100 + '%';
        particle.style.top = Math.random() * 100 + '%';
        particle.style.animationDelay = Math.random() * 6 + 's';
        particle.style.animationDuration = (Math.random() * 3 + 3) + 's';
        container.appendChild(particle);
    }
}
document.addEventListener('DOMContentLoaded', createParticles);
</script>
{% endblock %} 