{% extends 'base.html' %}
{% load static %}
{% block title %}امتیازدهی به سایت{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{% static 'css/home.css' %}">
<style>
.satisfaction-bg {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    width: 100vw; height: 100vh;
    z-index: 0;
    overflow: hidden;
    pointer-events: none;
}
.satisfaction-emoji {
    position: absolute;
    font-size: 3.2rem;
    opacity: 0.22;
    animation: float-emoji 14s linear infinite;
    user-select: none;
    filter: blur(0.5px);
    will-change: transform, opacity;
}
@keyframes float-emoji {
    0% { transform: translateY(100vh) scale(1) rotate(0deg); opacity: 0.18; }
    80% { opacity: 0.28; }
    100% { transform: translateY(-10vh) scale(1.2) rotate(30deg); opacity: 0; }
}
.logout-rating-hero {
    min-height: 100vh;
    width: 100vw;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    position: relative;
    z-index: 1;
}
@media (min-width: 600px) {
  .logout-rating-hero { min-height: 100vh; }
}
.rating-card {
    border-radius: 1.5rem;
    background: var(--bg-secondary, #fff);
    box-shadow: 0 8px 32px rgba(60,60,120,0.08);
    margin: 0 auto;
}
.rating-emojis .emoji-label {
    cursor: pointer;
    transition: transform 0.2s;
    font-size: 2.2rem;
}
.rating-emojis .emoji-label:hover .emoji,
.rating-emojis .emoji-label input:checked + .emoji {
    transform: scale(1.3);
    filter: drop-shadow(0 0 6px #ffd700);
}
.rating-emojis .emoji {
    transition: transform 0.2s, filter 0.2s;
    display: inline-block;
}
</style>
{% endblock %}

{% block content %}
<div class="satisfaction-bg" id="satisfactionBg"></div>
<section class="logout-rating-hero">
    <div class="logo-container mb-2">
        <div class="logo-glow"></div>
        <h1 class="hero-title">PIMXCHAT</h1>
        <div class="logo-subtitle">از رضایت شما خوشحال می‌شویم!</div>
    </div>
    <div class="hero-description mb-4">
        <p>لطفاً میزان رضایت خود از سایت را با انتخاب یکی از گزینه‌های زیر ثبت کنید.</p>
    </div>
    <div class="card p-4 shadow-lg rating-card" style="max-width: 400px; width: 100%; background: var(--bg-secondary, #fff);">
        {% if error %}
            <div class="alert alert-danger">{{ error }}</div>
        {% endif %}
        <form method="post" id="ratingForm">
            {% csrf_token %}
            <div class="d-flex justify-content-between align-items-center mb-3 rating-emojis">
                <label class="emoji-label">
                    <input type="radio" name="rating" value="1" hidden>
                    <span class="emoji" title="خیلی ناراضی">😡</span>
                </label>
                <label class="emoji-label">
                    <input type="radio" name="rating" value="2" hidden>
                    <span class="emoji" title="ناراضی">😞</span>
                </label>
                <label class="emoji-label">
                    <input type="radio" name="rating" value="3" hidden>
                    <span class="emoji" title="معمولی">😐</span>
                </label>
                <label class="emoji-label">
                    <input type="radio" name="rating" value="4" hidden>
                    <span class="emoji" title="راضی">🙂</span>
                </label>
                <label class="emoji-label">
                    <input type="radio" name="rating" value="5" hidden>
                    <span class="emoji" title="خیلی راضی">😍</span>
                </label>
            </div>
            <button type="submit" class="cta-button primary w-100 mt-3">ثبت امتیاز و خروج</button>
        </form>
    </div>
</section>
<script>
// Satisfaction emoji background animation
const emojis = ["😡", "😞", "😐", "🙂", "😍"];
function randomBetween(a, b) { return Math.random() * (b - a) + a; }
function createEmoji() {
    const emoji = document.createElement('span');
    emoji.className = 'satisfaction-emoji';
    emoji.textContent = emojis[Math.floor(Math.random() * emojis.length)];
    emoji.style.left = randomBetween(2, 92) + 'vw';
    emoji.style.fontSize = randomBetween(2.5, 4.2) + 'rem';
    emoji.style.animationDuration = randomBetween(10, 18) + 's';
    emoji.style.opacity = randomBetween(0.18, 0.28);
    emoji.style.top = '100vh';
    document.getElementById('satisfactionBg').appendChild(emoji);
    setTimeout(() => emoji.remove(), 20000);
}
setInterval(createEmoji, 600);
for (let i = 0; i < 14; i++) setTimeout(createEmoji, i * 350);
// Rating emoji selection
const form = document.getElementById('ratingForm');
const emojiInputs = document.querySelectorAll('.emoji-label input');
emojiInputs.forEach(input => {
    input.addEventListener('change', function() {
        emojiInputs.forEach(i => i.nextElementSibling.classList.remove('selected'));
        if (this.checked) {
            this.nextElementSibling.classList.add('selected');
        }
    });
});
form.addEventListener('submit', function() {
    // Optionally, you can add a loading spinner or disable the button
});
</script>
{% endblock %} 