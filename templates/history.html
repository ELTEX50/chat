<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>تاریخچه چت - PIMXCHAT</title>
    <meta name="description" content="مشاهده و مدیریت تاریخچه چت‌های شما">
    <link rel="stylesheet" href="history.css">
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="history-container">
        <!-- Header -->
        <header class="history-header">
            <div class="header-content">
                <div class="header-left">
                    <h1 class="page-title">تاریخچه چت</h1>
                    <p class="page-subtitle">مشاهده و مدیریت تمام چت‌های شما</p>
                </div>
                <div class="header-right">
                    <a href="index.html" class="btn btn-primary">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                        </svg>
                        چت جدید
                    </a>
                </div>
            </div>
        </header>

        <!-- Search and Filters -->
        <div class="search-section">
            <div class="search-container">
                <div class="search-box">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="11" cy="11" r="8"/>
                        <path d="m21 21-4.35-4.35"/>
                    </svg>
                    <input type="text" id="searchInput" placeholder="جستجو در چت‌ها...">
                    <button class="clear-search" id="clearSearch" style="display: none;">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <line x1="18" y1="6" x2="6" y2="18"/>
                            <line x1="6" y1="6" x2="18" y2="18"/>
                        </svg>
                    </button>
                </div>
                
                <div class="filter-controls">
                    <select id="dateFilter">
                        <option value="all">تمام تاریخ</option>
                        <option value="today">امروز</option>
                        <option value="week">هفته گذشته</option>
                        <option value="month">ماه گذشته</option>
                        <option value="year">سال گذشته</option>
                    </select>
                    
                    <select id="topicFilter">
                        <option value="all">تمام موضوعات</option>
                        <option value="programming">برنامه‌نویسی</option>
                        <option value="math">ریاضی</option>
                        <option value="language">زبان‌های خارجی</option>
                        <option value="science">علوم</option>
                        <option value="other">سایر</option>
                    </select>
                    
                    <select id="ratingFilter">
                        <option value="all">تمام امتیازات</option>
                        <option value="5">5 ستاره</option>
                        <option value="4">4 ستاره</option>
                        <option value="3">3 ستاره</option>
                        <option value="2">2 ستاره</option>
                        <option value="1">1 ستاره</option>
                    </select>
                </div>
            </div>
            
            <div class="view-controls">
                <div class="view-toggle">
                    <button class="view-btn active" data-view="list">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <line x1="8" y1="6" x2="21" y2="6"/>
                            <line x1="8" y1="12" x2="21" y2="12"/>
                            <line x1="8" y1="18" x2="21" y2="18"/>
                            <line x1="3" y1="6" x2="3.01" y2="6"/>
                            <line x1="3" y1="12" x2="3.01" y2="12"/>
                            <line x1="3" y1="18" x2="3.01" y2="18"/>
                        </svg>
                    </button>
                    <button class="view-btn" data-view="grid">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="3" y="3" width="7" height="7"/>
                            <rect x="14" y="3" width="7" height="7"/>
                            <rect x="14" y="14" width="7" height="7"/>
                            <rect x="3" y="14" width="7" height="7"/>
                        </svg>
                    </button>
                </div>
                
                <div class="sort-controls">
                    <select id="sortBy">
                        <option value="date">مرتب بر اساس تاریخ</option>
                        <option value="title">مرتب بر اساس عنوان</option>
                        <option value="rating">مرتب بر اساس امتیاز</option>
                        <option value="messages">مرتب بر اساس تعداد پیام</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <main class="history-main">
            <!-- Results Summary -->
            <div class="results-summary">
                <div class="summary-info">
                    <span id="resultsCount">1,247 چت یافت شد</span>
                    <span class="separator">•</span>
                    <span id="filterInfo">نمایش تمام چت‌ها</span>
                </div>
                <div class="bulk-actions" id="bulkActions" style="display: none;">
                    <button class="btn btn-secondary" id="selectAllBtn">انتخاب همه</button>
                    <button class="btn btn-secondary" id="deleteSelectedBtn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="3,6 5,6 21,6"/>
                            <path d="M19,6v14a2,2,0,0,1-2,2H7a2,2,0,0,1-2-2V6m3,0V4a2,2,0,0,1,2-2h4a2,2,0,0,1,2,2V6"/>
                        </svg>
                        حذف انتخاب شده
                    </button>
                </div>
            </div>

            <!-- Chat List -->
            <div class="chat-list" id="chatList">
                <!-- Chat items will be dynamically generated -->
            </div>

            <!-- Empty State -->
            <div class="empty-state" id="emptyState" style="display: none;">
                <div class="empty-icon">
                    <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                    </svg>
                </div>
                <h3>هیچ چتی یافت نشد</h3>
                <p>چت‌های شما با فیلترهای انتخاب شده مطابقت ندارد</p>
                <button class="btn btn-primary" id="clearFiltersBtn">پاک کردن فیلترها</button>
            </div>

            <!-- Load More -->
            <div class="load-more" id="loadMore" style="display: none;">
                <button class="btn btn-secondary" id="loadMoreBtn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 12a9 9 0 11-6.219-8.56"/>
                    </svg>
                    بارگذاری بیشتر
                </button>
            </div>
        </main>
    </div>

    <!-- Chat Preview Modal -->
    <div class="modal" id="chatPreviewModal">
        <div class="modal-content large">
            <div class="modal-header">
                <h3 id="previewTitle">پیش‌نمایش چت</h3>
                <div class="modal-actions">
                    <button class="btn btn-secondary" id="exportChatBtn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                            <polyline points="7,10 12,15 17,10"/>
                            <line x1="12" y1="15" x2="12" y2="3"/>
                        </svg>
                        خروجی
                    </button>
                    <button class="modal-close" id="closePreviewModal">&times;</button>
                </div>
            </div>
            <div class="modal-body">
                <div class="chat-preview" id="chatPreview">
                    <!-- Chat messages will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div class="modal" id="deleteModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>تأیید حذف</h3>
                <button class="modal-close" id="closeDeleteModal">&times;</button>
            </div>
            <div class="modal-body">
                <p>آیا مطمئن هستید که می‌خواهید چت‌های انتخاب شده را حذف کنید؟</p>
                <p class="warning-text">این عمل قابل بازگشت نیست.</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelDelete">لغو</button>
                <button class="btn btn-destructive" id="confirmDelete">حذف</button>
            </div>
        </div>
    </div>

    <!-- Language Selector -->
    <div class="language-selector">
        <select id="languageSelect">
            <option value="fa">فارسی</option>
            <option value="en">English</option>
            <option value="fr">Français</option>
            <option value="it">Italiano</option>
            <option value="es">Español</option>
            <option value="de">Deutsch</option>
            <option value="ko">한국어</option>
            <option value="ja">日本語</option>
            <option value="he">עברית</option>
            <option value="ar">العربية</option>
        </select>
    </div>

    <script src="history.js"></script>
</body>
</html> 